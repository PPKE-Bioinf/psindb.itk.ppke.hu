{% extends 'base.html' %}
{% load static %}

{% block title %}PSINDB{% endblock %}

{% block content %}
    {% if results %}
        {% if search_term %}
            <h2 class="lonely">Search results for "{{ search_term }}":</h2>
        {% endif %}
        {% if browse_term %}
            <h2>Browse results for "{{ browse_term }}":</h2>
        {% endif %}
        {% for result in results %}
            <div class="search-page-result">
                <div class="search-result-header">
{#                    <div><p>UNIPROT ID: </p></div>#}
                    <div><a class="big-entry-link" href="{% url 'entry' uniprot_id=result.protein_id %}">{{ result.protein_id }}</a></div>
                    <div class="push-flex"><span>Number of interacting partners: {{ result.num_interactions }}</span></div>
                    <div class="left-flex"><span>Postsynaptic evidence:</span></div>
                    <div class="left-flex"><span class="evidence">GO</span>
                    {% if result.evidence_go != "no" %}
                        <img src="{% static 'images/check-circle.svg' %}">
                    {% else %}
                        <img src="{% static 'images/circle.svg' %}">
                    {% endif %}</div>
                    <div class="left-flex">
                    {% if result.evidence_g2c != "no" %}
                        <a href="https://www.genes2cognition.org/db/Search?text={{ result.evidence_g2c }}">G2C</a>
                        <img src="{% static 'images/check-circle.svg' %}">
                    {% else %}
                        <span class="evidence">G2C</span>
                        <img src="{% static 'images/circle.svg' %}">
                    {% endif %}</div>
                    <div class="left-flex">
                    {% if result.evidence_syngo != "no" %}
                        <a href="https://syngoportal.org/gene.html?HGNC:{{ result.evidence_syngo }}">SynGO</a>
                        <img src="{% static 'images/check-circle.svg' %}">
                    {% else %}
                        <span class="evidence">SynGO</span>
                        <img src="{% static 'images/circle.svg' %}">
                    {% endif %}</div>
                    <div class="left-flex">
                    {% if result.evidence_synaptomedb != "no" %}
                        <a href="http://metamoodics.org/SynaptomeDB/synmain/synaptome_all_view.php?editid1={{ result.evidence_synaptomedb }}">SynaptomeDB</a>
                        <img src="{% static 'images/check-circle.svg' %}">
                    {% else %}
                        <span class="evidence">SynaptomeDB</span>
                        <img src="{% static 'images/circle.svg' %}">
                    {% endif %}</div>
                </div>
{#                <div><span>Number of interacting partners: {{ result.num_interactions }}</span></div>#}
                <div id="pfv-{{ result.protein_id }}" style="margin-top:15px" ></div>
{#                <script type="text/javascript">#}
{#                {% autoescape off %}#}
{#                {{ result.insert_js }}#}
{#                {% endautoescape %}#}
{#                </script>#}
            </div>

        {% endfor %}
    {% endif %}

    {% if show_browse_list %}
        <h1 class="lonely">Select a category to browse:</h1>
        <ul class="browse-list">
            <li><a href="/?browse=scaffold">Scaffold proteins</a></li>
            <li><a href="/?browse=cytoskeletal">Cytoskeletal proteins</a></li>
            <li><a href="/?browse=membrane">Transmembrane proteins</a></li>
            <li><a href="/?browse=cc">Coiled-coil containing proteins</a></li>
            <li><a href="/?browse=llps">Phase separation</a></li>
            <li><a href="/?browse=hub">Hub proteins</a></li>
            <li><a href="/?browse=Structure">With structural evidence</a></li>
            <li><a href="/?browse=Literature">With literature evidence</a></li>
        </ul>
    {% endif %}

    {% if error %}
        <h1 class="lonely">{{ error }}</h1>
    {% endif %}

{% endblock %}